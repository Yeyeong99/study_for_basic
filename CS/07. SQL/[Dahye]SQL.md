<목차>

- Schema
- Data Types and Constraints
- Primary and Foreign Keys

---

https://www.youtube.com/watch?v=1RCMYG8RUSE

### **레코드(Record)란?**

- **테이블에서 하나의 행(row)** 을 의미.

---

### **테이블(Table) 구조 예시**

| ID | 이름 | 나이 | 이메일 |
| --- | --- | --- | --- |
| 1 | 김철수 | 25 | chulsoo@email.com |
| 2 | 이영희 | 30 | younghee@email.com |
| 3 | 박민수 | 28 | minsu@email.com |
- `1, 김철수, 25, chulsoo@email.com` → **1번째 레코드**
- `2, 이영희, 30, younghee@email.com` → **2번째 레코드**
- `3, 박민수, 28, minsu@email.com` → **3번째 레코드**

---

| 용어 | 설명 |
| --- | --- |
| **테이블 (Table)** | 데이터를 저장하는 구조 (엑셀의 시트 같은 개념) |
| **열 (Column, 필드 Field)** | 데이터의 속성 (예: ID, 이름, 나이, 이메일) |
| **행 (Row, 레코드 Record)** | 하나의 데이터 단위 (각 사용자의 정보) |
| **셀 (Cell)** | 하나의 데이터 값 (예: "김철수", "25") |

## 🍎 Schema

---

### SQL(Structured Query Language)

- 관계형 데이터베이스에서 데이터를 관리하고 조작하는 데 사용되는 표준 언어
- SQL을 사용하면 데이터베이스에서 데이터를 조회, 삽입, 수정, 삭제하는 등의 작업 가능
    - ex) SELECT 문을 사용해 데이터를 조회, INSERT INTO 문으로 데이터를 추가, UPDATE 문으로 데이터를 수정 등
    

### **Schema**

- Schema는 데이터베이스를 설계할 때 중요한 부분으로, 각 테이블의 속성, 데이터 형식, 관계 등을 정의함.
    - ex) "학생" 테이블을 만든다면, 이 테이블의 schema에는 학생의 이름, 학번, 전공 등의 column과 그 데이터 유형들이 포함될 수 있음
- 데이터베이스의 구조를 정의하는 개념으로, 테이블, 뷰, 인덱스, 관계 등 데이터베이스 내 객체들의 조직적인 배치를 나타냄,
- SQL에서는 schema를 사용해 데이터베이스 내 객체들이 어떻게 조직되고 관리되는지 정의함

### IMDb(Internet Movie Database)

- 영화, TV 프로그램, 배우, 감독 등과 관련된 정보를 제공하는 온라인 데이터베이스
- 줄거리, 출연진, 리뷰, 평점, 출시일, 수상 내역 등의 다양한 정보를 제공
- IMDb는 방대한 양의 데이터를 관리하고 제공하기 위해 관계형 데이터베이스를 사용함. 이 데이터베이스에는 영화나 TV 프로그램, 배우 정보, 제작진 정보, 리뷰, 평점 등 다양한 항목들이 포함됨. 이를 통해 사용자는 특정 영화나 TV 프로그램에 대한 상세한 정보를 쉽게 찾을 수 있음.

- **shows.db:**  IMDb 등의 서비스에서 사용되는 SQLite  데이터베이스 파일. 영화나 TV 프로그램에 대한 정보를 저장
    - 테이블 형식으로 다양한 정보를 구조적으로 저장하고, SQL 쿼리를 통해 필요한 정보를 효율적으로 검색하고 조회할 수 있음. 이러한 db를 활용해 사용자가 원하는 영화나 TV 프로그램에 대한 정보를 빠르고 정확하게 제공

```jsx
#IMDb의 데이터베이스 shows.db

sqlite3 shows.db
sqlite> SELECT * FROM shows LIMIT 10; 

sqlite> SELECT * FROM ratings LIMIT 10;
```

![image.png](attachment:7e6bb923-7f38-4b89-874a-555bfebafda0:image.png)

### **One to One 관계**

- 두 테이블 간의 관계에서 한 테이블의 레코드가 다른 테이블의 정확히 하나의 레코드와 연결되는 관계. 즉, 한 테이블의 한 행이 다른 테이블의 한 행에만 대응되는 경우.
    - ex) "사용자" 테이블과 "사용자 프로필" 테이블이 있음. 각 사용자는 하나의 프로필만 가지고 있고, 하나의 프로필은 정확히 한 사용자에게만 속한다고 할 때, 이 두 테이블 간에는 **One to One 관계**가 형성됨.

### 예시:

1. **사용자 테이블**:
    - `user_id` (사용자 ID)
    - `username` (사용자 이름)
    - `email` (이메일 주소)
2. **사용자 프로필 테이블**:
    - `profile_id` (프로필 ID)
    - `user_id` (사용자 ID, **`사용자 테이블`의 외래 키**)
    - `address` (주소)
    - `phone_number` (전화번호)
    

여기서 **user_id**는 **사용자 테이블**과 **사용자 프로필 테이블** 간의 **One to One 관계**를 나타냄. 각 사용자는 하나의 프로필만 가지므로, 한 사용자에 대한 프로필은 하나만 존재하고, 각 프로필은 오직 한 사용자에게만 속함. 

이 관계는 일반적으로 두 테이블 사이에 **외래 키**를 설정하여 구현되며, 외래 키는 한 테이블의 특정 행이 다른 테이블의 특정 행을 참조하는 방식으로 사용됨. 

## 🍏 Data Types and Constraints

---

SQL에서 데이터 유형(Data Type)은 각 컬럼이 저장할 수 있는 데이터의 형식을 정의함.  다양한 데이터 유형이 있으며, 각 데이터 유형은 특정 종류의 데이터를 저장하는 데 적합함. 

1. **BLOB (Binary Large Object)**:
    - **이진 데이터** 저장. 보통 이미지, 오디오, 비디오 파일 등 큰 파일을 저장할 때 사용됨.
        - ex) 사진, 음성 녹음 파일, PDF 파일 등
2. **INTEGER**:
    - **정수** 값 저장. 음수, 0, 양수의 정수 값을 저장 가능.
        - ex) 1, -10, 42 등
3. **NUMERIC**:
    - **숫자 데이터**를 저장. 보통 **소수점이 있는 숫자**나 **정밀한 숫자**를 다룰 때 사용.
        - ex) 12.34, 100.50, -8.9 등
        - 이 데이터 유형은 실수 값의 저장을 위해 사용되며, 소수점 이하 자릿수를 정확하게 표현 가능
4. **REAL**:
    - **실수** 값을 저장하는 데이터 유형으로, 소수점이 포함된 숫자를 저장.
        - 3.14, -0.001, 10.5 등
        - `NUMERIC`과 비슷하지만 `REAL`은 상대적으로 소수점 이하 자리수에 대한 정확도가 떨어질 수 있음. 주로 부동소수점 계산에 사용됨.
    

<aside>
💡

**NUMERIC vs REAL?**

✔ **정확한 값이 필요하면** → `NUMERIC(10,2)` 또는 `DECIMAL(10,2)`

✔ **근사값이라도 빠른 처리가 중요하면** → `REAL` 또는 `FLOAT`

**결론**:

- **금융, 화폐, 회계**처럼 **정확한 연산**이 필요한 경우 `NUMERIC` 사용
- **과학 계산, 센서 데이터, 그래픽 연산**처럼 속도가 중요한 경우 `REAL` 사용
- 

REAL(부동 소수점)은 속도가 빠르지만, 부동소수점 오차가 발생할 수 있기 때문에 **금융 데이터에는 절대 사용 금지!**

</aside>

1. **TEXT**:
    - **문자열** 데이터를 저장하는 데 사용. 긴 텍스트, 이름, 설명 등의 데이터를 저장.
        - ex) "Hello", "This is a text field", "123abc" 등

1. **날짜 및 시간 관련:**
    - `DATE` : 연-월-일(YYYY-MM-DD) 형식의 날짜 저장
    - `TIME` : 시-분-초(HH:MM:SS) 형식의 시간 저장
    - `DATETIME` / `TIMESTAMP` : 날짜와 시간을 함께 저장 (YYYY-MM-DD HH:MM:SS)
        - DATETIME 은 주문 시간, 예약 시간 등 **고정된 날짜와 시간**을 저장할 때, TIMESTAMP는 
        레코드 생성/수정 시 **자동으로 시간 기록**이 필요한 경우 (`created_at`, `updated_at`) 사용하면 좋음.

## 🍎 Primary and Foreign Keys

---

**데이터베이스의 관계**에는 **One to One** 외에도 다양한 종류가 있음. 일반적으로 관계형 데이터베이스에서는 **One to One**, **One to Many**, **Many to Many** 관계를 주로 사용함. 그리고 **Primary Key**와 **Foreign Key**는 이러한 관계를 정의하고 연결하는 데 중요한 역할을 함. 

### **Primary Key (기본 키)**

- **Primary Key**는 테이블에서 각 레코드를 고유하게 식별할 수 있는 컬럼 또는 컬럼들의 조합. 하나의 테이블에는 **단 하나의 Primary Key**만 존재할 수 있으며, 이 값은 **중복될 수 없고** **NULL일 수 없음.**
- Primary Key는 테이블 내에서 각 레코드가 유일하게 식별될 수 있도록 도와줌.
    
    **예시**:
    
    - **학생** 테이블에서 `student_id`는 Primary Key가 됨. 각 학생의 `student_id`는 고유하고, 중복되거나 NULL이 될 수 없습니다.

---

### **Foreign Key (외래 키)**

- 외래 키는 다른 테이블의 데이터를 **참조**하는 데 사용되며, 이를 통해 두 테이블 간의 관계를 정의함.
    
    **예시**:
    
    - **학생** 테이블: `student_id`, `student_name`
    - **수업** 테이블: `course_id`, `course_name`
    - **학생_수업** 중간 테이블: `student_id` (외래 키), `course_id` (외래 키)
    
    여기서, **학생_수업** 테이블의 `student_id`는 **학생** 테이블의 `student_id`를 참조하는 외래 키. 마찬가지로, `course_id`는 **수업** 테이블의 `course_id`를 참조하는 외래 키. 
    
    ### **테이블 예시: 학생, 수업, 학생_수업 테이블**
    
    ### 1️⃣ **학생 (Students) 테이블** (`student_id`가 Primary Key)
    
    | student_id (PK) | student_name |
    | --- | --- |
    | 1 | 김철수 |
    | 2 | 이영희 |
    | 3 | 박민수 |
    
    ---
    
    ### 2️⃣ **수업 (Courses) 테이블** (`course_id`가 Primary Key)
    
    | course_id (PK) | course_name |
    | --- | --- |
    | 101 | 데이터베이스 |
    | 102 | 알고리즘 |
    | 103 | 웹 개발 |
    
    ---
    
    ### 3️⃣ **학생_수업 (Student_Courses) 테이블**
    
    이 테이블은 학생과 수업 간의 **연관 관계를 나타내는 중간 테이블**로, `student_id`와 `course_id`가 **Foreign Key**로 설정됩니다.
    
    | student_id (FK) | course_id (FK) |
    | --- | --- |
    | 1 | 101 |
    | 1 | 102 |
    | 2 | 103 |
    | 3 | 101 |
    | 3 | 103 |
    
    ---
    
    ### 🔑 **Key 설명**
    
    - `student_id` (PK) → **학생 테이블의 Primary Key**
    - `course_id` (PK) → **수업 테이블의 Primary Key**
    - `student_id` (FK) → **학생_수업 테이블에서 학생 테이블을 참조하는 Foreign Key**
    - `course_id` (FK) → **학생_수업 테이블에서 수업 테이블을 참조하는 Foreign Key**
    

---

### 데이터베이스 관계의 요약:

- **One to One (1:1)**: 한 테이블의 한 레코드가 다른 테이블의 정확히 하나의 레코드와 연결됨.
- **One to Many (1:N)**: 한 테이블의 한 레코드가 다른 테이블의 여러 레코드와 연결됨.
- **Many to Many (M:N)**: 여러 레코드가 다른 테이블의 여러 레코드와 연결됨 (중간 테이블 필요).

### **Primary Key와 Foreign Key의 역할**:

- **Primary Key**는 테이블의 각 레코드를 고유하게 식별
- **Foreign Key**는 다른 테이블의 레코드를 참조하여 두 테이블 간의 관계를 설정하고, 데이터 무결성을 보장.

### 데이터의 무결성(Data Integrity)

- 데이터베이스 내에서 저장된 데이터가 정확하고 일관되며 신뢰할 수 있도록 유지되는 상태
- 데이터의 무결성을 유지하는 것은 데이터베이스 시스템에서 매우 중요한 역할을 하며, 오류나 부정확한 데이터가 저장되지 않도록 보장하는 것.
